# ToolForge

[English](README.md) | ç®€ä½“ä¸­æ–‡

ä¸€ä¸ªå…¨é¢çš„å¤šé˜¶æ®µæµæ°´çº¿ç³»ç»Ÿï¼Œç”¨äºç”Ÿæˆã€æ ‡æ³¨å’ŒéªŒè¯å¤šè·³æ¨ç†å¯¹è¯AIè®­ç»ƒæ•°æ®ã€‚

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)


## ğŸ¯ é¡¹ç›®æ¦‚è¿°

ToolForge æ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„æµæ°´çº¿ç³»ç»Ÿï¼Œç”¨äºè‡ªåŠ¨åŒ–åˆ›å»ºé«˜è´¨é‡çš„å¤šè·³æ¨ç†ä»»åŠ¡è®­ç»ƒæ•°æ®ã€‚ç³»ç»Ÿé€šè¿‡å››ä¸ªä¸åŒçš„é˜¶æ®µå¤„ç†åŸå§‹é—®ç­”æ•°æ®ï¼š

1. **Tool Construction and Diversificationï¼ˆStage 1ï¼‰**ï¼šåˆ©ç”¨ä¸€ä¸ªåŸºç¡€å·¥å…·å¤§è§„æ¨¡ç”Ÿæˆè™šæ‹Ÿçš„å¤šæ ·åŒ–å·¥å…·
2. **Selection of Tool-Calling Paradigmï¼ˆStage 2ï¼‰**ï¼šä¸ºæ¯ä¸ªqueryæä¾›Optimal toolsã€Optimal Tool-calling paradigmã€Optimal reasoning rationale
3. **æ•°æ®ç”Ÿæˆ + éªŒè¯è¯„åˆ†ï¼ˆStage 3 & Stage 4ï¼‰**ï¼šç”Ÿæˆå…·æœ‰åæ€å’Œå¤šè·³æ¨ç†èƒ½åŠ›çš„å¤šè½®å·¥å…·è°ƒç”¨å¯¹è¯æ•°æ®ï¼Œå¹¶ä½¿ç”¨åŸºäºè§„åˆ™å’ŒåŸºäºLLMçš„æ–¹æ³•éªŒè¯ç”Ÿæˆæ•°æ®çš„è´¨é‡

å¯ä»¥é€šè¿‡å¯åŠ¨webuié¡µé¢ï¼Œè½»æ¾å®ç°ä¸Šè¿°ä¸‰ä¸ªæ­¥éª¤çš„åŠŸèƒ½ã€‚


**æ ¸å¿ƒç‰¹æ€§**ï¼š
- ğŸ”§ å››é˜¶æ®µè‡ªåŠ¨åŒ–å¤„ç†æµæ°´çº¿
- ğŸ› ï¸ å¯æ‰©å±•çš„å·¥å…·åº“ç®¡ç†ç³»ç»Ÿ
- ğŸ¯ åŒé‡éªŒè¯æœºåˆ¶ï¼ˆè§„åˆ™+LLMï¼‰
- ğŸ–¥ï¸ äº¤äº’å¼Gradio Webç•Œé¢
- ğŸš€ å¹¶å‘å¤„ç†ä¸APIå¯†é’¥è½®æ¢

## ğŸ— ç³»ç»Ÿæ¶æ„

```
ToolForge/
â”œâ”€â”€ Stage_1/                  # Tool Construction and Diversification
â”‚   â”œâ”€â”€ generate_tool.py
â”‚   â””â”€â”€ tool_prompts.py
â”œâ”€â”€ Stage_2/                  # Selection of Tool-Calling Paradigm
â”‚   â””â”€â”€ code/
â”‚       â”œâ”€â”€ llm_generate_label.py
â”‚       â””â”€â”€ tool_prompts.py
â”œâ”€â”€ Stage_3/                  # æ•°æ®ç”Ÿæˆ
â”‚   â”œâ”€â”€ config/              # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ core/                # APIå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ services/            # å¯¹è¯ç”Ÿæˆã€å·¥å…·ç®¡ç†
â”‚   â”œâ”€â”€ tool_bank/tools/     # å·¥å…·å®šä¹‰ï¼ˆJSONLï¼‰
â”‚   â””â”€â”€ prompts/             # æç¤ºè¯æ¨¡æ¿
â”œâ”€â”€ Stage_4/                  # è´¨é‡éªŒè¯
â”‚   â”œâ”€â”€ config/              # é…ç½®æ–‡ä»¶    
â”‚   â”œâ”€â”€ core/                # LLMè¯„ä¼°å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ prompts/             # è¯„ä¼°æç¤ºè¯
â”‚   â”œâ”€â”€ utils/               # è¾…åŠ©å‡½æ•°
â”‚   â””â”€â”€ validators/          # éªŒè¯å¼•æ“
â””â”€â”€ gradio_webui/            # Webç•Œé¢
    â”œâ”€â”€ quick_fast.py        # ä¸»åº”ç”¨
    â”œâ”€â”€ feature_tool_variant_generator.py
    â”œâ”€â”€ feature_generate_judge.py
    â””â”€â”€ feature_tool_list_manager.py
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd ToolForge/gradio_webui
pip install -r requirements.txt
```

### 2. é…ç½®APIå¯†é’¥

**æ–¹å¼A - ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰**ï¼š
```bash
export API_KEYS="key1,key2,key3"
export API_BASE_URL="https://api.openai.com/v1"
```

**æ–¹å¼B - é…ç½®æ–‡ä»¶**ï¼š
ç¼–è¾‘ä»¥ä¸‹æ–‡ä»¶ä¸­çš„ `api_keys` åˆ—è¡¨ï¼š
- `Stage_2/code/llm_generate_label.py`
- `Stage_3/config/api_keys.py`
- `Stage_4/config/api_keys.py`

### 3. å¯åŠ¨Webç•Œé¢

```bash
python quick_fast.py
# è®¿é—® http://localhost:7860
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### åŠŸèƒ½ä¸€ï¼šå·¥å…·æ„å»ºä¸å¤šæ ·åŒ–

åŸºäºåŸå§‹å·¥å…·ç”Ÿæˆè¯­ä¹‰ç›¸ä¼¼çš„å˜ä½“ï¼Œæ‰©å……å·¥å…·åº“ã€‚

#### 1.1 å·¥å…·å˜ä½“ç”Ÿæˆ

**è¾“å…¥**ï¼šå•ä¸ªå·¥å…·çš„JSONå®šä¹‰
```json
{
  "name": "example_search",
  "description": "ç¤ºä¾‹æœç´¢å·¥å…·",
  "parameters": {
    "type": "object",
    "properties": {
      "query": {"type": "string", "description": "æœç´¢å†…å®¹"}
    },
    "required": ["query"]
  }
}
```

**é…ç½®å‚æ•°**ï¼š
- ç›®æ ‡ç”Ÿæˆæ•°é‡ï¼š10-50ï¼ˆæ¨èï¼‰
- ä½™å¼¦ç›¸ä¼¼åº¦é˜ˆå€¼ï¼š0.7ï¼ˆæ§åˆ¶è¯­ä¹‰ç›¸ä¼¼åº¦ï¼‰
- BM25ç›¸ä¼¼åº¦é˜ˆå€¼ï¼š0.6ï¼ˆé¿å…è¿‡åº¦ç›¸ä¼¼ï¼‰
- æ¨¡å‹ï¼šgpt-4.1 / claudeç³»åˆ—
- Temperatureï¼š1.0

**è¾“å‡º**ï¼šJSONLæ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ªå·¥å…·å˜ä½“

#### 1.2 å·¥å…·åˆ—è¡¨ç®¡ç†

ç®¡ç† `Stage_2/code/tool_prompts.py` ä¸­çš„ TOOL_LIST é…ç½®ã€‚

**æ“ä½œæµç¨‹**ï¼š
1. ç‚¹å‡»"åˆ·æ–°å·¥å…·åˆ—è¡¨"æ‰«æå·¥å…·åº“
2. å‹¾é€‰å·¥å…· â†’ ç‚¹å‡»"æ·»åŠ åˆ°TOOL_LIST"
3. ç§»é™¤ä¸éœ€è¦çš„å·¥å…·
4. ç‚¹å‡»"ä¿å­˜"æ›´æ–°é…ç½®æ–‡ä»¶

#### 1.3 æ–‡ä»¶æŸ¥çœ‹å™¨

æŸ¥çœ‹ç”Ÿæˆçš„å·¥å…·å˜ä½“ï¼Œæ”¯æŒé€è¡Œæµè§ˆå’ŒJSONæ ¼å¼åŒ–ã€‚

---

### åŠŸèƒ½äºŒï¼šå·¥å…·è°ƒç”¨èŒƒå¼çš„é€‰æ‹©

åˆ†æå¤šè·³é—®é¢˜ï¼Œè‡ªåŠ¨æ ‡æ³¨åˆé€‚çš„å·¥å…·å’Œæ‰§è¡Œè·¯å¾„ã€‚

#### 2.1 æ ‡æ³¨æµç¨‹

**è¾“å…¥æ•°æ®æ ¼å¼**ï¼ˆJSONLï¼‰ï¼š
```json
{
  "question": "è°æ˜¯ã€Šå“ˆåˆ©Â·æ³¢ç‰¹ã€‹çš„ä½œè€…ï¼Ÿå¥¹çš„ç¬¬ä¸€æœ¬ä¹¦æ˜¯ä»€ä¹ˆæ—¶å€™å‡ºç‰ˆçš„ï¼Ÿ",
  "answer": "J.K.ç½—ç³ï¼Œ1997å¹´",
  "type": "bridge",
  "supporting_facts": [...],
  "context": [...]
}
```

**è¾“å‡ºæ ¼å¼**ï¼ˆæ·»åŠ ä¸‰ä¸ªå­—æ®µï¼‰ï¼š
```json
{
  "question": "...",
  "answer": "...",
  "reasoning": "è¿™æ˜¯ä¸€ä¸ªä¸¤è·³é—®é¢˜ï¼š1) æ‰¾åˆ°ä½œè€… 2) æŸ¥è¯¢å‡ºç‰ˆæ—¶é—´...",
  "tool_select": "person_information_search, creation_information_search",
  "route_select": "case_C2"
}
```

**è·¯å¾„ç±»å‹**ï¼š
- `SRST`ï¼šSingle-Round Single-Tool (å¯¹åº”case_A)
- `SRMT`ï¼šSingle-Round Multi-Tool (å¯¹åº”case_B)
- `MRST`ï¼šMulti-Round Single-Tool (å¯¹åº”case_D)
- `MRMT`ï¼šMulti-Round Multi-Tool (å¯¹åº”case_C)

#### 2.2 å®æ—¶ç›‘æ§

**LLMå®æ—¶è¾“å‡º**çª—å£æ˜¾ç¤ºï¼š
- å½“å‰å¤„ç†çš„é—®é¢˜
- LLMçš„æ¨ç†è¿‡ç¨‹
- å·¥å…·é€‰æ‹©å’Œè·¯å¾„è§„åˆ’ä¾æ®

#### 2.3 æ–‡ä»¶æŸ¥çœ‹å™¨

æŸ¥çœ‹è¾“å…¥æ–‡ä»¶ã€è¾“å‡ºæ–‡ä»¶æˆ–è‡ªå®šä¹‰JSONLæ–‡ä»¶ã€‚

---

### åŠŸèƒ½ä¸‰ï¼šå¤šè½®å·¥å…·è°ƒç”¨å¯¹è¯æ•°æ®çš„ç”Ÿæˆä¸æ£€éªŒ

æ•´åˆStage 3å’ŒStage 4ï¼Œç”Ÿæˆå¹¶éªŒè¯é«˜è´¨é‡å¤šè½®å¯¹è¯æ•°æ®ã€‚



### å·¥å…·å®šä¹‰æ ¼å¼

å·¥å…·å®šä¹‰ä½äº `Stage_3/tool_bank/tools/`ï¼Œé‡‡ç”¨JSONLæ ¼å¼ï¼š

```json
{
  "name": "example_search",
  "description": "ç”¨äºæŸ¥æ‰¾ç‰¹å®šä¿¡æ¯çš„æœç´¢å·¥å…·",
  "parameters": {
    "type": "object",
    "properties": {
      "query": {"type": "string", "description": "æœç´¢æŸ¥è¯¢å†…å®¹"},
      "category": {"type": "string", "description": "æœç´¢ç±»åˆ«ï¼ˆå¯é€‰ï¼‰"}
    },
    "required": ["query"]
  }
}
```

### æ·»åŠ è‡ªå®šä¹‰å·¥å…·

1. åœ¨ `Stage_3/tool_bank/tools/` åˆ›å»ºJSONLæ–‡ä»¶
2. æŒ‰ä¸Šè¿°æ ¼å¼å®šä¹‰å·¥å…·
3. ä½¿ç”¨Webç•Œé¢çš„å·¥å…·åˆ—è¡¨ç®¡ç†å™¨æ·»åŠ åˆ°TOOL_LIST



### å‚æ•°æ¨è

| åœºæ™¯ | MAX_LINES | CONCURRENCY | APIå¯†é’¥æ•° |
|------|-----------|-------------|----------|
| å¼€å‘æµ‹è¯• | 10 | 2 | 1 |
| å°æ‰¹é‡ | 1000 | 5-10 | 2-3 |
| å¤§æ‰¹é‡ | 10000+ | 15-20 | 5+ |



## ğŸ“„ è®¸å¯è¯

MIT License - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ“ æ”¯æŒ

- ğŸ“– æŸ¥çœ‹ [å®Œæ•´æ–‡æ¡£](README.md)
- ğŸ› æäº¤ [Issue](https://github.com/yourusername/ToolForge/issues)
- ğŸ’¬ å‚ä¸ [Discussions](https://github.com/yourusername/ToolForge/discussions)

---

**ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–°**: 2025-01-15  
**ç»´æŠ¤è€…**: ToolForge Team

